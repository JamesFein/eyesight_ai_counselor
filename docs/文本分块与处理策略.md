## 方案总结

我为你设计了一套完整的RAG文本分块与处理策略：



### 核心方案

**按1级标题分块 + 元数据增强 + 同义词扩展**



### 关键设计点

1. **分块策略**
   - 以1级标题为分割边界（识别4种标题格式：#、数字、中文、加粗）
   - 文档开头单独作为"概述"块
   - 2级标题保留在块内，不再细分
   - 预计生成约49个块，平均2,900字符/块
2. **元数据**
   - `source`: 来源文档名
   - `chapter`: 章节标题
   - `year`: 发布年份（便于筛选最新资料）
   - `chunk_index` / `total_chunks`: 块在文档中的位置
3. **同义词扩展**
   - 覆盖角膜塑形镜、离焦镜片、阿托品、屈光术语等核心领域
   - 检索时自动扩展查询词
4. **检索集成**
   - BM25权重0.4 + 语义向量权重0.6
   - 每个子问题返回Top 3-5个块
   - 答案格式包含来源追溯
5. **表格处理**
   - 暂保留Markdown格式，后续根据测试结果决定是否改写